{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/aloye/Documents/adeyemi_frontend/app/%28dashboard%29/dashboard/admin/semester/page.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport theme from \"@/styles/theme\";\n\n// Consumes: colors.primary, colors.accent, colors.background, colors.surface, colors.border, colors.textPrimary, colors.textSecondary, spacing.4, spacing.6, radii.card, shadows.medium\n\ninterface PlatformSettings {\n  universityName: string;\n  currentSession: string;\n  currentSemester: string;\n  gradingSystem: { [key: string]: number };\n  cgpaScale: number;\n  registrationOpen: boolean;\n  resultPublicationOpen: boolean;\n  maxCreditUnitsPerSemester: number;\n}\n\n/**\n * Platform Settings Dashboard\n * Handles all global platform configuration and semester controls.\n */\nexport default function PlatformSettingsPage() {\n  const [settings, setSettings] = useState<PlatformSettings | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const router = useRouter();\n  const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\n\n  const defaultSettings: PlatformSettings = {\n    universityName: \"Adeyemi Federal University of Education\",\n    currentSession: \"2025/2026\",\n    currentSemester: \"First Semester\",\n    gradingSystem: { A: 70, B: 60, C: 50, D: 45, E: 40, F: 0 },\n    cgpaScale: 5.0,\n    registrationOpen: false,\n    resultPublicationOpen: false,\n    maxCreditUnitsPerSemester: 24,\n  };\n\n  // Fetch platform settings\n  const getSettings = async () => {\n    try {\n      const res = await fetch(\"/api/settings\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      const data = await res.json();\n      setSettings((data || defaultSettings) as PlatformSettings);\n    } catch {\n      console.error(\"Failed to load settings\");\n      setSettings(defaultSettings);\n    }\n  };\n\n  useEffect(() => {\n    if (!token) {\n      router.push(\"/\");\n    } else {\n      getSettings();\n    }\n  }, [token, router]);\n\n  // Handle updates to settings\n  const handleChange = (key: keyof PlatformSettings, value: any) => {\n    setSettings((prev) => ({\n      ...prev!,\n      [key]: value,\n    }));\n  };\n\n  // Save settings to backend\n  const saveSettings = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/settings/update\", {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(settings),\n      });\n      const data = await res.json();\n      setSettings(data as PlatformSettings);\n      alert(\"Settings updated successfully\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Error updating settings\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle switch toggle\n  const handleToggle = (key: keyof PlatformSettings) => {\n    setSettings((prev) => ({\n      ...prev!,\n      [key]: !prev![key],\n    }));\n  };\n\n  if (!settings) return <p className=\"text-center mt-10 text-textSecondary\">Loading settings...</p>;\n\n  return (\n    <main className=\"min-h-screen bg-background p-4 md:p-6\">\n      <div className=\"max-w-6xl mx-auto space-y-6\">\n        <h1 className=\"text-2xl font-bold text-primary mb-4\">Platform Settings</h1>\n\n        {/* General Information */}\n        <section className=\"bg-surface border-border shadow-md rounded-xl p-6\">\n          <h2 className=\"text-xl font-semibold text-textPrimary mb-4\">University Information</h2>\n          <div className=\"grid sm:grid-cols-2 gap-4\">\n            <div>\n              <Label htmlFor=\"universityName\" className=\"block text-sm text-textSecondary mb-1\">\n                University Name\n              </Label>\n              <Input\n                id=\"universityName\"\n                type=\"text\"\n                value={settings.universityName}\n                onChange={(e) => handleChange(\"universityName\", e.target.value)}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"currentSession\" className=\"block text-sm text-textSecondary mb-1\">\n                Current Session\n              </Label>\n              <Input\n                id=\"currentSession\"\n                type=\"text\"\n                value={settings.currentSession}\n                onChange={(e) => handleChange(\"currentSession\", e.target.value)}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"currentSemester\" className=\"block text-sm text-textSecondary mb-1\">\n                Current Semester\n              </Label>\n              <Select\n                value={settings.currentSemester}\n                onValueChange={(value) => handleChange(\"currentSemester\", value)}\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Select semester\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"First Semester\">First Semester</SelectItem>\n                  <SelectItem value=\"Second Semester\">Second Semester</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Label htmlFor=\"maxCreditUnitsPerSemester\" className=\"block text-sm text-textSecondary mb-1\">\n                Max Credit Units Per Semester\n              </Label>\n              <Input\n                id=\"maxCreditUnitsPerSemester\"\n                type=\"number\"\n                value={settings.maxCreditUnitsPerSemester}\n                onChange={(e) => handleChange(\"maxCreditUnitsPerSemester\", Number(e.target.value))}\n              />\n            </div>\n          </div>\n        </section>\n\n        {/* Grading System */}\n        <section className=\"bg-surface border-border shadow-md rounded-xl p-6\">\n          <h2 className=\"text-xl font-semibold text-textPrimary mb-4\">Grading System</h2>\n          <div className=\"grid grid-cols-3 sm:grid-cols-6 gap-4\">\n            {Object.entries(settings.gradingSystem).map(([grade, value]) => (\n              <div key={grade} className=\"text-center\">\n                <p className=\"font-semibold text-textPrimary\">{grade}</p>\n                <Input\n                  type=\"number\"\n                  value={value}\n                  onChange={(e) =>\n                    handleChange(\"gradingSystem\", {\n                      ...settings.gradingSystem,\n                      [grade]: Number(e.target.value),\n                    })\n                  }\n                  className=\"mt-1\"\n                />\n              </div>\n            ))}\n          </div>\n\n          <div className=\"mt-4\">\n            <Label htmlFor=\"cgpaScale\" className=\"block text-sm text-textSecondary mb-1\">\n              CGPA Scale\n            </Label>\n            <Input\n              id=\"cgpaScale\"\n              type=\"number\"\n              step=\"0.1\"\n              value={settings.cgpaScale}\n              onChange={(e) => handleChange(\"cgpaScale\", Number(e.target.value))}\n            />\n          </div>\n        </section>\n\n        {/* Toggles */}\n        <section className=\"bg-surface border-border shadow-md rounded-xl p-6\">\n          <h2 className=\"text-xl font-semibold text-textPrimary mb-4\">Active Controls</h2>\n          <div className=\"grid sm:grid-cols-2 gap-6\">\n            {/* Registration */}\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-textPrimary font-medium\">Course Registration</span>\n              <Switch\n                checked={settings.registrationOpen}\n                onCheckedChange={() => handleToggle(\"registrationOpen\")}\n              />\n            </div>\n\n            {/* Results */}\n            <div className=\"flex justify-between items-center\">\n              <span className=\"text-textPrimary font-medium\">Result Publication</span>\n              <Switch\n                checked={settings.resultPublicationOpen}\n                onCheckedChange={() => handleToggle(\"resultPublicationOpen\")}\n              />\n            </div>\n          </div>\n        </section>\n\n        {/* Save Button */}\n        <div className=\"flex justify-end\">\n          <Button onClick={saveSettings} disabled={loading}>\n            {loading ? \"Saving...\" : \"Save Changes\"}\n          </Button>\n        </div>\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}